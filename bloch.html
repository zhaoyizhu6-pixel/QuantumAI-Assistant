<!doctype html><html lang='zh-CN'><head><meta charset='utf-8'><title>Bloch 球 · 自动联动</title><meta name='viewport' content='width=device-width, initial-scale=1'><style>body{font-family:system-ui,-apple-system,Segoe UI,Roboto,'Noto Sans SC',Arial,sans-serif;margin:0;padding:8px;background:#0b1220;color:#e8edf7}canvas{background:radial-gradient(circle at 50% 50%,#14213a,#0b1220);border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,0.4);width:100%;height:520px}.row{display:flex;gap:8px;margin:6px 0}button{padding:8px 12px;background:#1e2b4a;color:#e8edf7;border:1px solid #2a3a62;border-radius:10px;cursor:pointer}small{color:#a9b4d0}</style></head><body><div class='row'><button onclick='opH()'>H</button><button onclick='opX()'>X</button><button onclick='opZ()'>Z</button><button onclick='opS()'>S</button><button onclick='reset()'>重置 |0⟩</button></div><canvas id='cv' width='800' height='520'></canvas><div id='state'><small>|ψ⟩ = 1.00|0⟩ + 0.00|1⟩</small></div><script>let c=document.getElementById('cv');let g=c.getContext('2d');let W=c.width,H=c.height;let cx=W/2,cy=H/2,R=Math.min(W,H)*0.42;let v={x:0,y:0,z:1};function draw(){g.clearRect(0,0,W,H);g.strokeStyle='#2a3a62';g.lineWidth=3;g.beginPath();g.arc(cx,cy,R,0,Math.PI*2);g.stroke();g.strokeStyle='#1e2b4a';g.lineWidth=1;g.beginPath();g.moveTo(cx-R,cy);g.lineTo(cx+R,cy);g.stroke();g.beginPath();g.moveTo(cx,cy-R);g.lineTo(cx,cy+R);g.stroke();let px=cx+v.x*R,py=cy-v.y*R;g.strokeStyle='#0a0f1f';g.lineWidth=8;g.beginPath();g.moveTo(cx,cy);g.lineTo(px,py);g.stroke();g.strokeStyle='#73b3ff';g.lineWidth=4;g.beginPath();g.moveTo(cx,cy);g.lineTo(px,py);g.stroke();let ang=Math.atan2(-(py-cy),(px-cx)),ah=12;g.beginPath();g.moveTo(px,py);g.lineTo(px-ah*Math.cos(ang-0.3),py+ah*Math.sin(ang-0.3));g.lineTo(px-ah*Math.cos(ang+0.3),py+ah*Math.sin(ang+0.3));g.closePath();g.fillStyle='#73b3ff';g.fill();let a0=Math.sqrt(Math.max(0,(1+v.z)/2)),a1=Math.sqrt(Math.max(0,(1-v.z)/2));document.getElementById('state').innerHTML=`<small>|ψ⟩ = ${a0.toFixed(2)}|0⟩ + ${a1.toFixed(2)}|1⟩</small>`;}function norm(){let m=Math.sqrt(v.x*v.x+v.y*v.y+v.z*v.z)||1;v.x/=m;v.y/=m;v.z/=m;}function opH(){v={x:v.z,y:v.y,z:0};norm();draw();}function opX(){v={x:v.x,y:-v.y,z:-v.z};norm();draw();}function opZ(){v={x:-v.x,y:-v.y,z:v.z};norm();draw();}function opS(){v={x:-v.y,y:v.x,z:v.z};norm();draw();}function reset(){v={x:0,y:0,z:1};draw();}draw();window.addEventListener('message',(e)=>{const d=e.data||{};if(!d.gate)return;const delay=d.speed==='slow'?800:200;if(d.gate==='H')setTimeout(opH,delay);if(d.gate==='X')setTimeout(opX,delay);if(d.gate==='Z')setTimeout(opZ,delay);if(d.gate==='S')setTimeout(opS,delay);});</script></body></html>